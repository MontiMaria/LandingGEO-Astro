---
// src/components/Accordion.astro
const { items } = Astro.props;
---

<div class="accordion-group w-full max-w-2xl mx-auto space-y-3">
  {items.map((item, index) => (
    <div class="accordion-item rounded-lg bg-white shadow-md transition-all duration-300">
      <button class="accordion-trigger flex w-full items-center justify-between p-4 text-left font-semibold text-gray-800">
        <span class="font-principal text-[1.2rem]">{item.title}</span>
        <svg class="h-5 w-5 shrink-0 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
        </svg>
      </button>
      <div class="accordion-content grid grid-rows-[0fr] transition-all duration-500 ease-in-out mb-8">
        <div class="overflow-hidden">
          <p class="p-4 leading-loose pt-0 text-gray-600 text-xs">
            {item.content}
          </p>
        </div>
      </div>
    </div>
  ))}
</div>

<style>
  /* Clases para el estado abierto */
  .accordion-item.is-open .accordion-trigger svg {
    transform: rotate(180deg);
  }
  .accordion-item.is-open .accordion-content {
    grid-template-rows: 1fr;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const accordionItems = document.querySelectorAll('.accordion-item');

    accordionItems.forEach(item => {
      const trigger = item.querySelector('.accordion-trigger');

      trigger.addEventListener('click', () => {
        const isOpen = item.classList.contains('is-open');

        // 1. Cerrar todos los demÃ¡s items
        accordionItems.forEach(otherItem => {
          if (otherItem !== item) {
            otherItem.classList.remove('is-open');
          }
        });

        // 2. Abrir o cerrar el item clickeado
        if (!isOpen) {
          item.classList.add('is-open');
        } else {
          item.classList.remove('is-open');
        }
      });
    });
  });
</script>